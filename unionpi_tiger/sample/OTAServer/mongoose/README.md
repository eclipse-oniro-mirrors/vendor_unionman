# OTAServer

本程序为windows下OpenHarmony的OTA更新服务器，用于结合系统更新app实现在线OTA更新

## 文件上传

1.服务器部署后实现了一个简单的上传功能，可以通过浏览器访问上传页面，填写更新信息以及上传文件，上传的文件存放在服务器部署路径的storage文件夹下。

![p1](figure\p1.png)

Webroot文件夹为网站的静态资源目录，里面存放上传的html文件，用户访问网站时会跳转到此页面

![p2](figure\p2.png)

## 文件下载：

系统更新应用可以通过特定的链接下载到升级包。

示例代码通过访问http://0.0.0.0:8002/api/updater就可以实现下载。

## 编译方式
本程序依赖openssl库做会话层加密传输，mongoose库用于对外提供http服务，cJSON库用于生成与解析json字符串。


在windows下，可使用源码引入方式，将上述依赖库的源码引入至本项目，由于OpenHarmony贡献代码限制，本项目源码暂不提供其依赖库的源码引用。若源码引入出现问题难以解决，也可使用vcpkg(`windows下的C/C++程序包管理工具`)来安装这些依赖库，然后手动链接这些依赖库或者使用cmake自动化解决。本项目的makefile仅供参考，必要时需要自行修改